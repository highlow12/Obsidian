classDiagram
    %% 인터페이스 정의
    class ITransition<TState> {
        +bool CheckCondition()
        +TState GetTargetState()
    }

    %% 상태 클래스 정의
    class State<T> {
        -T context
        +State(T context)
        +void Enter()
        +void Exit()
        +void Update()
        +void FixedUpdate()
    }

    %% 상태 기계 클래스
    class StateMachine<TContext, TStateEnum> {
        -TContext context
        -Dictionary<TStateEnum, State<TContext>> states
        -Dictionary<TStateEnum, List<ITransition<TStateEnum>>> transitions
        -State<TContext> currentState
        -TStateEnum currentStateEnum
        +TStateEnum CurrentState
        +StateMachine(TContext context)
        +void AddState(TStateEnum stateEnum, State<TContext> state)
        +void AddTransition(TStateEnum from, ITransition<TStateEnum> transition)
        +void SetInitialState(TStateEnum stateEnum)
        +void Update()
        +void FixedUpdate()
    }

    %% 보스 상태 클래스
    class BossState {
        -IMovement movement
        +BossState(BossMonster boss, IMovement movement)
        +void Update()
    }

    %% 보스 몬스터 클래스
    class BossMonster {
        -float phaseChangeHealthThreshold
        -float berserkHealthThreshold
        -StateMachine<BossMonster, BossStateType> stateMachine
        -Transform PlayerTransform
        -float CurrentHealth
        +void Start()
        +void InitializeStateMachine()
        +void Update()
        +void PerformAttack1()
    }

    %% 보스 상태 구체 클래스들 정의
    class BossIdleState {
        +void Enter()
        +BossIdleState(BossMonster boss)
    }

    class BossChaseState {
        +BossChaseState(BossMonster boss)
    }

    class BossAttack1State {
        +BossAttack1State(BossMonster boss)
        +void Update()
    }

    %% 전환 클래스
    class HealthThresholdTransition {
        -BossMonster boss
        -float threshold
        -BossStateType targetState
        +HealthThresholdTransition(BossMonster boss, float threshold, BossStateType targetState)
        +bool CheckCondition()
        +BossStateType GetTargetState()
    }

    class TimerTransition {
        -float duration
        -float timer
        -BossStateType targetState
        +TimerTransition(float duration, BossStateType targetState)
        +bool CheckCondition()
        +BossStateType GetTargetState()
    }

    %% 보스 상태 열거형
    enum BossStateType {
        Idle
        Chase
        Attack1
        Attack2
        Berserk
        StunState
    }

    %% 클래스 관계 정의
    ITransition <|.. HealthThresholdTransition
    ITransition <|.. TimerTransition
    State <|-- BossState
    BossState <|-- BossIdleState
    BossState <|-- BossChaseState
    BossState <|-- BossAttack1State
    StateMachine <|.. BossMonster
